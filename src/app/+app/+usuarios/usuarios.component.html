<search-bar>
  <div>
    <input type="text" placeholder="ID"/>
    <img src="images/search-user.svg" class="search-icon" />
  </div>
  <div>
    <input type="text" placeholder="Nombre"/>
    <img src="images/search-user.svg" class="search-icon" />
  </div>
  <button id="addUserButton" class="btn btn-default btn-modal"
          (click)="create(addUserModal)">
    <img src="images/add-user-icon.svg">
  </button>

</search-bar>

<div class="mainContent">
  <user-item *ngFor="let user of users"
             [user]="user"
             (update)="update($event, updateUserModal)"
             (delete)="delete($event, deleteUserModal)"
  ></user-item>
</div>


<modal #addUserModal>
  <modal-header [show-close]="true">
    <h4 class="modal-title">Añadir Usuario</h4>
  </modal-header>
  <modal-body>
    <form class="modal-form" *ngIf="selectedUser">
      <input class="form-control" type="text" placeholder="Nombre"
             [(ngModel)]="selectedUser.name"/>
      <input class="form-control" type="text" placeholder="Apellido"
             [(ngModel)]="selectedUser.last_name"/>
      <input class="form-control" type="text" placeholder="Email"
             [(ngModel)]="selectedUser.email"/>
      <input class="form-control" type="password" placeholder="Contraseña"
             [(ngModel)]="selectedUser.password"/>
      <input class="form-control" type="password" placeholder="Confirmar contraseña"
             [(ngModel)]="selectedUser.password"/>
      <input type="submit" class="btn btn-primary" (click)="createUser(addUserModal)"  value="Aceptar">
    </form>

  </modal-body>
  <modal-footer [show-default-buttons]="true"></modal-footer>
</modal>


<modal #updateUserModal>
  <modal-header [show-close]="true">
    <h4 class="modal-title">Usuario</h4>
  </modal-header>
  <modal-body>
    <form class="modal-form" id="editUserForm" *ngIf="selectedUser">
      <input class="form-control"
             type="text" placeholder="Nombre"
             [(ngModel)]="selectedUser.name"/>
      <input class="form-control"
             type="text" placeholder="Apellido Paterno"
             [(ngModel)]="selectedUser.last_name"/>
      <input class="form-control"
             type="text" placeholder="Apellido Materno"
             [(ngModel)]="selectedUser.last_name2"/>
      <input class="form-control"
             type="email" placeholder="Email"
             [(ngModel)]="selectedUser.email"/>
      <input class="form-control"
             type="text" placeholder="Teléfono"
             [(ngModel)]="selectedUser.phone"/>
      <input class="form-control"
             type="text" placeholder="Celular"
             [(ngModel)]="selectedUser.cellphone"/>
      <input class="form-control"
             type="text" placeholder="Dirección"
             [(ngModel)]="selectedUser.address"/>
      <input class="form-control"
             type="text" placeholder="RFC"
             [(ngModel)]="selectedUser.rfc"/>
      <!--<input class="form-control" disabled="true"
             type="password" placeholder="Contraseña"/>
      <input class="form-control" disabled="true"
             type="password" placeholder="Confirmar contraseña"/>-->
      <input type="submit" class="btn btn-primary" value="Aceptar">
    </form>
  </modal-body>
  <modal-footer>
    <button type="button" class="btn btn-primary" (click)="updateUser(updateUserModal)" >Guardar Cambios</button>
    <button type="button" class="btn btn-primary btn-close-modal" >Close</button>
  </modal-footer>
</modal>

<modal #deleteUserModal>
  <modal-header [show-close]="true" *ngIf="selectedUser">
    <h4 class="modal-title">¿Desea eliminar al usuario: {{selectedUser.name}}?</h4>
  </modal-header>
  <modal-footer>
    <div class="modal-confirm-buttons-div">
      <button type="button" class="btn btn-primary"
              (click)="deleteUser(deleteUserModal)">Eliminar usuario</button>
      <button type="button" class="btn btn-primary"
              data-dismiss="modal">No eliminar usuario</button>
    </div>
  </modal-footer>
</modal>
